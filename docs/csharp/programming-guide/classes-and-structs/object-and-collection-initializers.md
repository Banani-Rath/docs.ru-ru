---
title: "Инициализаторы объектов и коллекций (Руководство по программированию в C#) | Microsoft Docs"
ms.custom: ""
ms.date: "11/24/2016"
ms.prod: "visual-studio-dev14"
ms.reviewer: ""
ms.suite: ""
ms.technology: 
  - "devlang-csharp"
ms.tgt_pltfrm: ""
ms.topic: "article"
dev_langs: 
  - "CSharp"
helpviewer_keywords: 
  - "инициализаторы наборов [C#]"
  - "инициализаторы объектов [C#]"
ms.assetid: c58f3db5-d7d4-4651-bd2d-5a3a97357f61
caps.latest.revision: 27
caps.handback.revision: 27
author: "BillWagner"
ms.author: "wiwagn"
manager: "wpickett"
translationtype: Human Translation
---
# Инициализаторы объектов и коллекций (Руководство по программированию в C#)
[!INCLUDE[vs2017banner](../../../csharp/includes/vs2017banner.md)]

Инициализаторы объектов позволяют присваивать значения всем доступным полям и свойствам объекта во время создания без вызова конструктора, за которым следуют строки операторов присваивания.  Синтаксис инициализатора объекта позволяет задавать аргументы конструктора или опускать их \(и синтаксис в скобках\).  В следующем примере показаны использование инициализатора объекта с именованным типом `Cat` и вызов конструктора по умолчанию.  Обратите внимание на использование в классе `Cat` автоматически внедренных свойств.  Дополнительные сведения см. в разделе [Автоматически реализуемые свойства](../../../csharp/programming-guide/classes-and-structs/auto-implemented-properties.md)  
  
 [!CODE [csProgGuideLINQ#39](../CodeSnippet/VS_Snippets_VBCSharp/csProgGuideLINQ#39)]  
  
 [!CODE [csProgGuideLINQ#45](../CodeSnippet/VS_Snippets_VBCSharp/csProgGuideLINQ#45)]  
  
## Инициализаторы объектов с анонимными типами  
 Хотя инициализаторы объектов можно использовать в любом контексте, они особенно полезны в выражениях запросов [!INCLUDE[vbteclinq](../../../csharp/includes/vbteclinq_md.md)].  В выражениях запросов часто используются [анонимные типы](../../../csharp/programming-guide/classes-and-structs/anonymous-types.md), которые можно инициализировать только с помощью инициализаторов объектов, как показано в следующем объявлении.  
  
```  
var pet = new { Age = 10, Name = "Fluffy" };  
```  
  
 Анонимные типы позволяют предложению `select` в выражении запроса [!INCLUDE[vbteclinq](../../../csharp/includes/vbteclinq_md.md)] преобразовывать объекты исходной последовательности в объекты, значение и форма которых могут отличаться от исходных.  Это бывает полезно, если требуется сохранить лишь часть информации от каждого объекта последовательности.  В приведенном ниже примере предполагается, что у объекта продукта \(`p`\) имеется множество полей и методов, и требуется создать последовательность объектов, содержащую только имя продукта и его цену.  
  
 [!CODE [csProgGuideLINQ#40](../CodeSnippet/VS_Snippets_VBCSharp/csProgGuideLINQ#40)]  
  
 При выполнении этого запроса переменная `productInfos` будет содержать последовательность объектов, доступных в операторе `foreach`, как показано в следующем примере.  
  
```  
foreach(var p in productInfos){...}  
```  
  
 Каждый объект нового анонимного типа содержит два общедоступных свойства, имеющих те же имена, что и у свойств или полей исходного объекта.  Кроме того, при создании анонимного типа можно переименовать поле; в следующем примере выполняется переименование поля `UnitPrice` в `Price`.  
  
```  
select new {p.ProductName, Price = p.UnitPrice};  
```  
  
## Инициализаторы объектов с типами, допускающими значение NULL  
 При попытке использовать инициализатор объекта со структурой, допускающей значение NULL, произойдет ошибка компиляции.  
  
## Инициализаторы коллекций  
 Инициализаторы коллекций позволяют задавать один или несколько инициализаторов элементов при инициализации класса коллекции, реализующего интерфейс <xref:System.Collections.IEnumerable> или класс с методом расширения `Add`.  Инициализаторами элементов могут быть простые значения, выражения и инициализаторы объектов.  При использовании инициализатора коллекции не требуется указывать в исходном коде несколько вызовов метода `Add` класса; эти вызовы добавляет компилятор.  
  
 Ниже приведены два примера простых инициализаторов коллекций.  
  
```  
List<int> digits = new List<int> { 0, 1, 2, 3, 4, 5, 6, 7, 8, 9 };  
List<int> digits2 = new List<int> { 0 + 1, 12 % 3, MakeInt() };  
```  
  
 В следующем инициализаторе коллекции используются инициализаторы объектов класса `Cat`, определенного в предыдущем примере.  Обратите внимание, что инициализаторы отдельных объектов заключены в скобки и разделены запятыми.  
  
 [!CODE [csProgGuideLINQ#41](../CodeSnippet/VS_Snippets_VBCSharp/csProgGuideLINQ#41)]  
  
 В качестве элемента инициализатора коллекции можно указать значение [null](../../../csharp/language-reference/keywords/null.md), если метод `Add` коллекции допускает это.  
  
 [!CODE [csProgGuideLINQ#42](../CodeSnippet/VS_Snippets_VBCSharp/csProgGuideLINQ#42)]  
  
 Можно указать индексированные элементы, если коллекция поддерживает индексирование.  
  
```  
var numbers = new Dictionary<int, string> {   
    [7] = "seven",   
    [9] = "nine",   
    [13] = "thirteen"   
};  
  
```  
  
## Пример  
 [!CODE [csProgGuideLINQ#46](../CodeSnippet/VS_Snippets_VBCSharp/csProgGuideLINQ#46)]  
  
## См. также  
 [Руководство по программированию на C\#](../../../csharp/programming-guide/index.md)   
 [Выражения запросов LINQ](../../../csharp/programming-guide/linq-query-expressions/index.md)   
 [Анонимные типы](../../../csharp/programming-guide/classes-and-structs/anonymous-types.md)