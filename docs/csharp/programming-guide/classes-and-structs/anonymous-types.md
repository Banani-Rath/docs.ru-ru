---
title: "Анонимные типы (Руководство по программированию в C#) | Microsoft Docs"
ms.custom: ""
ms.date: "11/24/2016"
ms.prod: "visual-studio-dev14"
ms.reviewer: ""
ms.suite: ""
ms.technology: 
  - "devlang-csharp"
ms.tgt_pltfrm: ""
ms.topic: "article"
dev_langs: 
  - "CSharp"
helpviewer_keywords: 
  - "анонимные типы [C#]"
  - "C# - язык, анонимные типы"
ms.assetid: 59c9d7a4-3b0e-475e-b620-0ab86c088e9b
caps.latest.revision: 28
caps.handback.revision: 28
author: "BillWagner"
ms.author: "wiwagn"
manager: "wpickett"
translationtype: Human Translation
---
# Анонимные типы (Руководство по программированию в C#)
[!INCLUDE[vs2017banner](../../../csharp/includes/vs2017banner.md)]

Анонимные типы позволяют легко инкапсулировать свойства только для чтения в один объект без необходимости предварительного определения типа.  Имя типа создается компилятором и недоступно на уровне исходного кода.  Тип каждого свойства выводится компилятором.  
  
 Анонимные типы создаются с помощью [нового](../../../csharp/language-reference/keywords/new.md) оператора и инициализатора объекта.  Дополнительные сведения об инициализаторах объекта см. в разделе [Инициализаторы объектов и коллекций](../../../csharp/programming-guide/classes-and-structs/object-and-collection-initializers.md).  
  
 В следующем примере показан анонимный тип, инициализированный с помощью двух свойств — `Amount` и `Message`.  
  
```c#  
  
var v = new { Amount = 108, Message = "Hello" };  
  
// Rest the mouse pointer over v.Amount and v.Message in the following  
// statement to verify that their inferred types are int and string.  
Console.WriteLine(v.Amount + v.Message);  
  
```  
  
 Обычно анонимные типы используются в предложении [SELECT](../../../csharp/language-reference/keywords/select-clause.md) выражения запроса для возврата поднабора свойств из каждого объекта в исходной последовательности.  Дополнительные сведения о запросах см. в разделе [Выражения запросов LINQ](../../../csharp/programming-guide/linq-query-expressions/index.md).  
  
 Анонимные типы содержат один или несколько публичных свойств только для чтения.  Другие члены класса, например методы или события, недопустимы.  Выражение, которое используется для инициализации свойства, не может быть `null`, анонимной функцией или типом указателя.  
  
 Наиболее частый сценарий — это инициализация анонимного типа со свойствами из другого типа.  В следующем примере предполагается, что существует класс с именем `Product`.  Класс `Product` включает свойства `Color` и `Price`, а также другие свойства, в которых вы не заинтересованы.  Переменная `products` является коллекцией объектов `Product`.  Объявление анонимного типа запускается с помощью ключевого слова `new`.  Объявление инициализирует новый тип, который использует только два свойства из `Product`.  Это приводит к тому, что для возврата остается меньшее количество данных.  
  
 Если имена членов в анонимном типе не указаны, компилятор присваивает членам анонимного типа одно и то же имя, поскольку для их инициализации используется свойство.  Необходимо указать имя для свойства, инициализируемого с помощью выражения, как показано в предыдущем примере.  В следующем примере используются имена свойств анонимного типа `Color` и `Price`.  
  
 [!CODE [csRef30Features#81](../CodeSnippet/VS_Snippets_VBCSharp/csRef30Features#81)]  
  
 Обычно если для инициализации переменной, используется анонимный тип, необходимо обозначить ее как неявно типизированную переменную с помощью функции [var](../../../csharp/language-reference/keywords/var.md).  Имя типа не может быть указано в объявлении переменной, так как доступ к базовому имени анонимного типа имеет только компилятор.  Дополнительные сведения о `var` см. в разделе [Неявно типизированные локальные переменные](../../../csharp/programming-guide/classes-and-structs/implicitly-typed-local-variables.md).  
  
 Вы можете создать массив анонимно типизированных элементов, объединив неявно типизированные локальные переменные и неявно типизированный массив, как показано в следующем примере.  
  
```c#  
var anonArray = new[] { new { name = "apple", diam = 4 }, new { name = "grape", diam = 1 }};  
```  
  
## Заметки  
 Анонимные типы являются типами [класса](../../../csharp/language-reference/keywords/class.md), произведенными от [объекта](../../../csharp/language-reference/keywords/object.md) напрямую, и не могут быть приведены ни к какому иному типу, кроме [объекта](../../../csharp/language-reference/keywords/object.md).  Компилятор назначает имя для каждого анонимного типа, несмотря на то что для вашего приложения он недоступен.  С точки зрения среды CLR анонимный тип не отличается от остальных типов ссылки.  
  
 Если два или несколько инициализаторов анонимных объектов в сборке указывают на последовательность свойств, идущих в том же порядке и имеющих те же типы и имена, компилятор обрабатывает объекты как экземпляры одного типа.  Они используют одни и те же сведения типа, созданные компилятором.  
  
 К анонимному типу нельзя отнести никакое поле, свойство, событие или тип возвращаемого значения метода.  Точно так же нельзя отнести к анонимному типу ни один формальный параметр метода, свойство, конструктор или индексатор.  Для передачи анонимного типа или коллекции, содержащей анонимные типы, как аргумента для метода можно использовать этот параметр в качестве объекта типа.  Однако подобное решение противоречит цели строгого ввода.  Если вам нужно сохранить результаты запроса или передать их за пределы метода, используйте вместо анонимного типа структуру или класс, названные обычным образом.  
  
 Так как методы <xref:System.Object.Equals%2A> и <xref:System.Object.GetHashCode%2A> в анонимных типах определяются с точки зрения методов свойств `Equals` и `GetHashCode`, два экземпляра одного и того же анонимного типа равны, только если равны их свойства.  
  
## См. также  
 [Руководство по программированию на C\#](../../../csharp/programming-guide/index.md)   
 [Инициализаторы объектов и коллекций](../../../csharp/programming-guide/classes-and-structs/object-and-collection-initializers.md)   
 [Getting Started with LINQ in C\#](../../../csharp/programming-guide/concepts/linq/getting-started-with-linq.md)   
 [Выражения запросов LINQ](../../../csharp/programming-guide/linq-query-expressions/index.md)