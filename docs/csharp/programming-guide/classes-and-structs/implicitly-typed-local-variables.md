---
title: "Неявно типизированные локальные переменные (Руководство по программированию в C#) | Microsoft Docs"
ms.custom: ""
ms.date: "11/24/2016"
ms.prod: "visual-studio-dev14"
ms.reviewer: ""
ms.suite: ""
ms.technology: 
  - "devlang-csharp"
ms.tgt_pltfrm: ""
ms.topic: "article"
dev_langs: 
  - "CSharp"
helpviewer_keywords: 
  - "неявно типизированные локальные переменные [C#]"
  - "var [C#]"
ms.assetid: b9218fb2-ef5d-4814-8a8e-2bc29b0bbc9b
caps.latest.revision: 23
caps.handback.revision: 23
author: "BillWagner"
ms.author: "wiwagn"
manager: "wpickett"
translationtype: Human Translation
---
# Неявно типизированные локальные переменные (Руководство по программированию в C#)
[!INCLUDE[vs2017banner](../../../csharp/includes/vs2017banner.md)]

Локальным переменным вместо явного типа может быть задан определенный "тип" `var`.  Ключевое слово `var` сообщает компилятору необходимости определения типа переменной из выражения, находящегося с правой стороны оператора инициализации.  Выводимый тип может быть встроенным, анонимным, пользовательским типом или типом, определенным в библиотеке классов платформы .NET Framework.  Дополнительные сведения об инициализации массивов с `var` см. в разделе [Неявно типизированные массивы](../../../csharp/programming-guide/arrays/implicitly-typed-arrays.md).  
  
 В следующем примере показаны разные способы объявления локальных переменных с `var`.  
  
 [!CODE [csProgGuideLINQ#43](../CodeSnippet/VS_Snippets_VBCSharp/csProgGuideLINQ#43)]  
  
 Важно понять, что ключевое слово `var` не означает "вариант" и не указывает на свободную типизацию или позднюю привязку переменной.  Оно просто значит, что компилятор определяет и назначает наиболее подходящий тип.  
  
 Ключевое слово `var` можно использовать в следующих контекстах:  
  
-   в локальных переменных \(переменных, объявленных в области действия метода\), как показано в предыдущем примере;  
  
-   в операторе инициализации [for](../../../csharp/language-reference/keywords/for.md);  
  
    ```  
    for(var x = 1; x < 10; x++)  
    ```  
  
-   в операторе инициализации [for](../../../csharp/language-reference/keywords/foreach-in.md);  
  
    ```  
    foreach(var item in list){...}  
    ```  
  
-   в операторе [using](../../../csharp/language-reference/keywords/using-statement.md).  
  
    ```  
    using (var file = new StreamReader("C:\\myfile.txt")) {...}  
    ```  
  
 Дополнительные сведения см. в разделе [Практическое руководство. Использование явно введенных локальных переменных и массивов в выражении запроса](../../../csharp/programming-guide/classes-and-structs/how-to-use-implicitly-typed-local-variables-and-arrays-in-a-query-expression.md).  
  
## var и анонимные типы  
 Во многих случаях использование ключевого слова `var` является необязательным, оно служит лишь для синтаксического удобства.  Однако, когда переменная инициализируется анонимным типом, необходимо объявить переменную как `var`, если необходимо позже получить доступ к свойствам объекта.  Этот сценарий является типичным в выражениях запроса [!INCLUDE[vbteclinq](../../../csharp/includes/vbteclinq_md.md)].  Дополнительные сведения см. в разделе [Анонимные типы](../../../csharp/programming-guide/classes-and-structs/anonymous-types.md).  
  
 С точки зрения исходного кода анонимный тип не имеет имени.  Поэтому, если переменная запроса инициализирована с `var`, то единственный способ получить доступ к свойствам в возвращенной последовательности объектов заключается в использовании `var` в качестве типа переменной итерации в операторе `foreach`.  
  
 [!CODE [csProgGuideLINQ#44](../CodeSnippet/VS_Snippets_VBCSharp/csProgGuideLINQ#44)]  
  
## Заметки  
 К объявлениям неявно типизированных переменных применимы следующие ограничения.  
  
-   `var` может использоваться, только если локальная переменная объявлена и инициализирована в одном операторе; переменная не может быть инициализирована значением NULL или группой метода или анонимной функцией.  
  
-   `var` не может использоваться в полях в области действия класса.  
  
-   Переменные, объявленные с помощью `var`, не могут использоваться в выражении инициализации.  Другими словами, выражение `: int i = (i = 20);` допустимо, но это выражение вызывает ошибку времени компиляции: `var i = (i = 20);`.  
  
-   В одном операторе нельзя инициализировать несколько неявно типизированных переменных.  
  
-   Если тип с именем `var` находится в области действия, то ключевое слово `var` будет преобразовано в это имя типа и не будет обрабатываться как часть неявно типизированного объявления локальной переменной.  
  
 Использование ключевого слова `var` может оказаться целесообразным в выражениях запроса, где определение точного конструируемого типа переменной запроса является сложной задачей.  Это может происходить во время группировки и сортировки.  
  
 Ключевое слово `var` удобно, когда определенный тип переменной сложно вводить с клавиатуры, либо он является очевидным, либо не повышает удобочитаемость кода.  Примером подобного применения ключевого слова `var` служит ситуация со вложенными универсальными типами, которые используются операциях по группировке.  В следующем запросе используется переменная запроса с типом `IEnumerable<IGrouping<string, Student>>`.  При условии, что пользователи, работающие с кодом, понимают данные принципы, не возникнет никаких проблем с использованием неявной типизации для удобства и краткости.  
  
 [!CODE [cscsrefQueryKeywords#13](../CodeSnippet/VS_Snippets_VBCSharp/CsCsrefQueryKeywords#13)]  
  
 Однако использование ключевого слова `var` может сделать код более трудным для понимания другими разработчиками.  По этой причине в документации по C\# ключевое слово `var` обычно используется только при необходимости.  
  
## См. также  
 [Справочник по C\#](../../../csharp/language-reference/index.md)   
 [Неявно типизированные массивы](../../../csharp/programming-guide/arrays/implicitly-typed-arrays.md)   
 [Практическое руководство. Использование явно введенных локальных переменных и массивов в выражении запроса](../../../csharp/programming-guide/classes-and-structs/how-to-use-implicitly-typed-local-variables-and-arrays-in-a-query-expression.md)   
 [Анонимные типы](../../../csharp/programming-guide/classes-and-structs/anonymous-types.md)   
 [Инициализаторы объектов и коллекций](../../../csharp/programming-guide/classes-and-structs/object-and-collection-initializers.md)   
 [var](../../../csharp/language-reference/keywords/var.md)   
 [Выражения запросов LINQ](../../../csharp/programming-guide/linq-query-expressions/index.md)   
 [LINQ \(Language\-Integrated Query\)](../Topic/LINQ%20\(Language-Integrated%20Query\).md)   
 [for](../../../csharp/language-reference/keywords/for.md)   
 [foreach, in](../../../csharp/language-reference/keywords/foreach-in.md)   
 [Оператор using](../../../csharp/language-reference/keywords/using-statement.md)